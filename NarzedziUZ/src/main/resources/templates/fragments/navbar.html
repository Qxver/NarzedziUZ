<nav th:fragment="navbar" class="navbar">
    <div class="logo">
        <a th:href="@{/}">NarzedziUZ</a>
    </div>

    <form class="search-bar" method="get" action="/" id="filterForm">
        <input type="text"
               name="q"
               th:value="${searchQuery}"
               th:placeholder="#{nav.search_placeholder}"/>

        <select name="sortBy" id="sortBy"
                onchange="document.getElementById('filterForm').submit()">
            <option value="" th:text="#{nav.sort_by}"></option>
            <option value="price-asc"
                    th:selected="${selectedSort == 'price-asc'}"
                    th:text="#{nav.filter_price_asc}">
            </option>
            <option value="price-desc"
                    th:selected="${selectedSort == 'price-desc'}"
                    th:text="#{nav.filter_price_desc}">
            </option>
            <option value="rating-asc"
                    th:selected="${selectedSort == 'rating-asc'}"
                    th:text="#{nav.filter_rating_asc}">
            </option>
            <option value="rating-desc"
                    th:selected="${selectedSort == 'rating-desc'}"
                    th:text="#{nav.filter_rating_desc}">
            </option>
        </select>

        <select name="categoryId" id="categoryId"
                onchange="document.getElementById('filterForm').submit()">
            <option value="" th:text="#{nav.categories_all}"></option>

            <option th:each="category : ${categories}"
                    th:value="${category.categoryId}"
                    th:text="${category.name}"
                    th:selected="${selectedCategory == category.categoryId}">
            </option>
        </select>

        <button type="submit"
                class="search-button"
                th:text="#{nav.search_button}">
        </button>
    </form>

    <div class="navbar-buttons">

        <!-- Language switcher -->
        <div class="lang-container">
            <a th:href="@{/(lang='pl')}"
               class="lang-link"
               th:classappend="${#locale.language == 'pl'} ? 'active' : ''">
                PL
            </a>
            <span class="lang-separator">|</span>
            <a th:href="@{/(lang='en')}"
               class="lang-link"
               th:classappend="${#locale.language == 'en'} ? 'active' : ''">
                EN
            </a>
        </div>

        <a th:href="@{/cart}"
           class="navbar-button"
           th:text="#{nav.cart}">
        </a>

        <a th:if="${session.user != null}"
           th:href="@{/user/profile}"
           class="navbar-button"
           th:text="${session.userName}">
        </a>

        <a th:if="${session.user == null}"
           th:href="@{/login}"
           class="navbar-button"
           th:text="#{nav.login}">
        </a>

        <button id="theme-toggle"
                class="theme-toggle"
                title="Toggle theme"
                aria-label="Toggle dark/light theme">
            <!-- SVG bez zmian -->
        </button>
    </div>
</nav>
